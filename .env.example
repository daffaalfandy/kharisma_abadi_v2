# Kharisma Abadi V2 - Root Environment Variables
# Copy this file to .env and fill in the values
# Used by docker-compose.yml for all services
# DO NOT commit .env to version control

# ============================================================================
# Application Configuration
# ============================================================================

# Application name
APP_NAME=Kharisma Abadi V2

# Current environment (development, staging, production)
ENVIRONMENT=development

# Enable debug mode
DEBUG=true

# Log level (debug, info, warn, error)
LOG_LEVEL=debug

# ============================================================================
# Database Configuration (MariaDB)
# ============================================================================

# Root password for MariaDB (IMPORTANT: Change for production!)
DB_ROOT_PASSWORD=rootpassword

# Database name
DB_DATABASE=kharisma_db

# Database user
DB_USER=kharisma

# Database user password (IMPORTANT: Change for production!)
DB_PASSWORD=password

# Database host (docker service name)
DB_HOST=database

# Database port
DB_PORT=3306

# Database connection pool settings
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=5m

# ============================================================================
# Redis Configuration
# ============================================================================

# Redis host (docker service name)
REDIS_HOST=redis

# Redis port
REDIS_PORT=6379

# Redis password (leave empty if not using password)
REDIS_PASSWORD=

# Redis database number
REDIS_DB=0

# Cache default TTL in seconds
CACHE_DEFAULT_TTL=300

# ============================================================================
# Backend Configuration
# ============================================================================

# Backend service name
BACKEND_SERVICE=backend

# Backend port
BACKEND_PORT=8000

# Backend API version
API_VERSION=v1

# ============================================================================
# Frontend Configuration
# ============================================================================

# Frontend service name
FRONTEND_SERVICE=frontend

# Frontend port
FRONTEND_PORT=3000

# Frontend environment
NEXT_PUBLIC_API_URL=http://localhost:8000/api/v1

# ============================================================================
# Nginx Configuration
# ============================================================================

# Nginx service name
NGINX_SERVICE=nginx

# Nginx HTTP port
NGINX_HTTP_PORT=80

# Nginx HTTPS port
NGINX_HTTPS_PORT=443

# Server name for Nginx (domain name)
SERVER_NAME=localhost

# Enable HTTPS (requires SSL certificates)
ENABLE_HTTPS=false

# SSL certificate path (if ENABLE_HTTPS=true)
SSL_CERT_PATH=/etc/nginx/certs/server.crt

# SSL private key path (if ENABLE_HTTPS=true)
SSL_KEY_PATH=/etc/nginx/certs/server.key

# ============================================================================
# Security Configuration
# ============================================================================

# JWT Secret (IMPORTANT: Generate strong random string for production!)
# Example: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-min-32-characters-change-this

# JWT expiration time (hours)
JWT_EXPIRE_HOURS=24

# Refresh token expiration time (days)
REFRESH_TOKEN_EXPIRE_DAYS=7

# Bcrypt cost factor (higher = more secure but slower, 10-12 recommended)
BCRYPT_COST=12

# CORS allowed origins (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000

# ============================================================================
# File Upload Configuration
# ============================================================================

# Upload directory
UPLOAD_DIR=./backend/uploads

# Maximum upload size in bytes (10MB = 10485760)
MAX_UPLOAD_SIZE=10485760

# Allowed file extensions (comma-separated)
ALLOWED_EXTENSIONS=jpg,jpeg,png,pdf,doc,docx

# ============================================================================
# Backup Configuration
# ============================================================================

# Backup directory
BACKUP_DIR=./backups

# Backup retention days (delete backups older than this)
BACKUP_RETENTION_DAYS=30

# ============================================================================
# Email Configuration (Optional)
# ============================================================================

# Email provider (smtp, sendgrid, local)
EMAIL_PROVIDER=local

# SMTP host
SMTP_HOST=smtp.gmail.com

# SMTP port
SMTP_PORT=587

# SMTP username
SMTP_USER=your-email@gmail.com

# SMTP password
SMTP_PASSWORD=your-app-password

# From email address
FROM_EMAIL=noreply@kharisma.local

# ============================================================================
# SMS Configuration (Optional)
# ============================================================================

# SMS provider (twilio, local)
SMS_PROVIDER=local

# Twilio account SID
TWILIO_ACCOUNT_SID=

# Twilio auth token
TWILIO_AUTH_TOKEN=

# Twilio phone number
TWILIO_PHONE_NUMBER=

# ============================================================================
# Payment Configuration (Optional)
# ============================================================================

# Payment provider (stripe, paypal, local)
PAYMENT_PROVIDER=local

# Stripe API key
STRIPE_API_KEY=

# Stripe webhook secret
STRIPE_WEBHOOK_SECRET=

# ============================================================================
# Docker Volumes
# ============================================================================

# Database volume name
DB_VOLUME_NAME=db-data

# Redis volume name
REDIS_VOLUME_NAME=redis-data

# ============================================================================
# Docker Network
# ============================================================================

# Docker network name
DOCKER_NETWORK_NAME=kharisma-network

# ============================================================================
# Development Settings
# ============================================================================

# Enable hot reload for backend (air)
BACKEND_HOT_RELOAD=true

# Enable hot reload for frontend (npm dev)
FRONTEND_HOT_RELOAD=true

# Mount source code (development)
MOUNT_SOURCE=true

# Interactive terminal
INTERACTIVE_TTY=true

# ============================================================================
# Production Settings
# ============================================================================

# Container restart policy (no, always, on-failure, unless-stopped)
RESTART_POLICY=always

# Logging driver
LOG_DRIVER=json-file

# Max log file size
LOG_MAX_SIZE=10m

# Max log files
LOG_MAX_FILE=3

# ============================================================================
# Timezone
# ============================================================================

# Set timezone for containers (e.g., Asia/Jakarta, UTC, America/New_York)
TZ=Asia/Jakarta

# ============================================================================
# IMPORTANT SECURITY REMINDERS
# ============================================================================

# 1. CHANGE all passwords before deploying to production:
#    - DB_ROOT_PASSWORD
#    - DB_PASSWORD
#    - JWT_SECRET
#    - SMTP_PASSWORD
#
# 2. Generate strong random values:
#    JWT_SECRET: openssl rand -base64 32
#    DB_PASSWORD: openssl rand -base64 16
#
# 3. For production:
#    - ENVIRONMENT=production
#    - DEBUG=false
#    - LOG_LEVEL=info
#    - ENABLE_HTTPS=true
#    - Set actual SSL certificate paths
#
# 4. Backup database regularly
# 5. Monitor logs and error tracking
# 6. Keep Docker images updated
# 7. Use strong, unique passwords
# 8. Rotate JWT_SECRET periodically
# 9. Enable HTTPS/TLS
# 10. Configure firewall rules

# ============================================================================
# Configuration for Different Environments
# ============================================================================

# For development (docker-compose.yml + docker-compose.dev.yml):
# - ENVIRONMENT=development
# - DEBUG=true
# - LOG_LEVEL=debug
# - BACKEND_HOT_RELOAD=true
# - FRONTEND_HOT_RELOAD=true
# - MOUNT_SOURCE=true
#
# For production (docker-compose.yml + docker-compose.prod.yml):
# - ENVIRONMENT=production
# - DEBUG=false
# - LOG_LEVEL=info
# - BACKEND_HOT_RELOAD=false
# - FRONTEND_HOT_RELOAD=false
# - MOUNT_SOURCE=false
# - ENABLE_HTTPS=true
# - Set real domain in SERVER_NAME
# - Change all passwords
# - Set RESTART_POLICY=always
