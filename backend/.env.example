# =====================================================
# Kharisma Abadi Backend - Environment Configuration
# =====================================================
# Copy this file to .env and fill in the values
# DO NOT commit .env files to version control!

# =====================================================
# Application Settings
# =====================================================
APP_NAME=Kharisma Abadi API
APP_VERSION=1.0.0
ENVIRONMENT=development  # development | staging | production
DEBUG=true  # Set to false in production
LOG_LEVEL=info  # debug | info | warning | error

# =====================================================
# Server Configuration
# =====================================================
HOST=0.0.0.0
PORT=8000
WORKERS=4  # Number of worker processes

# =====================================================
# Database Configuration
# =====================================================
DB_HOST=localhost  # Use 'database' in Docker
DB_PORT=3306
DB_DATABASE=kharisma_db
DB_USER=kharisma
DB_PASSWORD=your_secure_password_here
DB_ROOT_PASSWORD=root_secure_password_here

# Database connection URL (auto-constructed in Go)
DATABASE_URL=mysql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_DATABASE}

# Database pool settings
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=5m

# =====================================================
# Redis Configuration (Optional)
# =====================================================
REDIS_HOST=localhost  # Use 'redis' in Docker
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Cache TTL (seconds)
CACHE_DEFAULT_TTL=300  # 5 minutes
CACHE_USER_TTL=600  # 10 minutes
CACHE_REPORT_TTL=1800  # 30 minutes

# =====================================================
# Security & Authentication
# =====================================================
# JWT Secret (MUST be changed in production!)
# Generate with: openssl rand -base64 32
JWT_SECRET=your-super-secret-key-min-32-characters-long-change-this!

# JWT Algorithm
JWT_ALGORITHM=HS256

# Token expiry times
ACCESS_TOKEN_EXPIRE_HOURS=14
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password hashing
BCRYPT_COST=12

# =====================================================
# CORS Configuration
# =====================================================
# Comma-separated list of allowed origins
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost

# =====================================================
# External Services
# =====================================================

# SMS Gateway (optional)
SMS_PROVIDER=  # local | twilio | nexmo
SMS_API_KEY=
SMS_API_SECRET=
SMS_FROM_NUMBER=

# Payment Gateway (future)
PAYMENT_PROVIDER=  # local | stripe | midtrans
PAYMENT_API_KEY=
PAYMENT_API_SECRET=
PAYMENT_WEBHOOK_SECRET=

# =====================================================
# File Upload Settings
# =====================================================
UPLOAD_DIR=./uploads
MAX_UPLOAD_SIZE=10485760  # 10MB in bytes
ALLOWED_EXTENSIONS=pdf,jpg,jpeg,png,doc,docx

# =====================================================
# Email Settings (Optional)
# =====================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@kharisma-abadi.local
SMTP_USE_TLS=true

# =====================================================
# Monitoring & Logging
# =====================================================
LOG_FILE=./logs/app.log
LOG_MAX_BYTES=10485760  # 10MB
LOG_BACKUP_COUNT=5

# Sentry (optional error tracking)
SENTRY_DSN=

# =====================================================
# Rate Limiting
# =====================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# =====================================================
# Backup Settings
# =====================================================
BACKUP_DIR=./backups
BACKUP_RETENTION_DAYS=30
AUTO_BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM (cron format)

# =====================================================
# Feature Flags
# =====================================================
FEATURE_SMS_NOTIFICATIONS=true
FEATURE_EMAIL_NOTIFICATIONS=false
FEATURE_PAYMENT_GATEWAY=false
FEATURE_REPORTS_EXPORT=true

# =====================================================
# Development/Staging
# =====================================================
# Seed database on startup (development only)
AUTO_SEED_DATABASE=false
SEED_DATA_FILE=./data/seed.json
